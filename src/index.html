<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legacies - Genealogy Document Generator</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Panel: PDF Upload and Controls -->
        <div class="panel left-panel">
            <div class="left-panel-main-content">
                <h2>Upload Genealogy Image</h2>
                <div class="upload-container" id="upload-container">
                    <div class="upload-area" id="upload-area">
                        <img src="/images/upload-icon.svg" alt="Upload Image/Screenshot" class="upload-icon" id="upload-icon">
                        <p>Paste screenshot or <span class="browse-text">browse image</span></p>
                        <input type="file" id="image-upload" accept="image/*" class="file-input" />
                    </div>
                    <div class="upload-preview" id="upload-preview">
                        <div class="pdf-upload-status">
                            <img id="image-preview-thumb" src="#" alt="Image Preview" style="display: none; max-width: 150px; max-height: 150px; border-radius: 8px; margin: 0 auto 10px auto; border: 1px solid #ddd;">
                            <div class="pdf-info" id="image-info-container">
                                <div class="pdf-filename" id="image-filename">document.pdf</div>
                            </div>
                        </div>
                        <div class="progress-container" style="margin-top: 15px;">
                            <div class="progress-bar" id="extraction-progress"></div>
                        </div>
                        <div class="extraction-status" id="extraction-status" style="margin-top: 10px; margin-bottom:15px;">Waiting for Image...</div>
                        
                        <button id="extract-data-btn" class="action-button" style="display: none; margin-bottom: 10px;">Extract Data</button>
                        <button id="remove-image-btn" class="remove-pdf-button">Remove Image</button>
                    </div>
                    
                    <!-- Add checkbox for person image -->
                    <div class="has-image-checkbox-container" style="display: flex; align-items: center; margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 6px; border: 1px solid #e9ecef;">
                        <input type="checkbox" id="next-person-has-image" class="has-image-checkbox" style="margin-right: 8px; accent-color: #a85733;">
                        <label for="next-person-has-image" style="font-size: 14px; color: #444;">Next person entry has an image</label>
                    </div>
                </div>
                
                <div class="extracted-data-container" id="extracted-data-container">
                    <h3>Extracted Data</h3>
                    <div class="view-toggle">
                        <button id="raw-view-btn" class="view-toggle-btn active">Raw Text</button>
                        <button id="parsed-view-btn" class="view-toggle-btn">Parsed Data</button>
                    </div>
                    <div class="data-preview" id="data-preview">
                        <p class="no-data-message">No data extracted yet</p>
                    </div>
                    <button id="apply-data-btn" class="action-button" disabled>Apply to Template</button>
                    <button id="unapply-data-btn" class="action-button unapply-button" style="display: none;">Revert to Original Template</button>
                </div>
            </div>
            
            <button id="add-page-btn" class="add-page-button" style="display: none;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="1.2em" height="1.2em" style="margin-right: 10px; vertical-align: middle;"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                Add New Page
            </button>
            
            <button id="save-pdf-btn" class="save-pdf-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="1.2em" height="1.2em" style="margin-right: 10px; vertical-align: middle;"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.83V19h2v-4.17l1.59 1.59L16 15.01 12.01 11z"/></svg>
                Save PDF
            </button>
        </div>
        
        <!-- Right Panel: Legacy Sheet Template -->
        <div class="panel right-panel">
            <!-- Pages Container -->
            <div class="pages-container" id="pages-container">
                <!-- Legacy Sheet Container -->
                <div class="legacy-sheet active-page" data-page-index="0">
                    <!-- Generation Header -->
                    <div class="generation-title">Sixth Generation</div>
                    <hr class="horizontal-rule">
                    
                    <!-- First Person Entry with children -->
                    <div class="person-entry">
                        <div class="person-number">9</div>
                        <div class="person-content">
                            <span class="person-name">Esther Elnora Williams</span><span class="relationship-text">, daughter of <a href="#">Jesse Williams</a> and <a href="#">Mary F. Williams</a>, was <br> born in 1890 in Dodgeville, Iowa, WI and died in 1928 in Dodgeville, Iowa, WI, at <br> age 38.</span>
                            
                            <img src="/images/ehlers.jpg" alt="Esther Elnora Williams" class="person-image">
                            
                            <div class="marriage-details">
                                Esther married <a href="#">William Vincent Rogers Sr.</a>, son of <a href="#">George Richard Rogers</a> and <a href="#">Catherine Josephine Ruppert</a>, on 30 Mar 1910 in Iowa Co., WI.
                            </div>
                            
                            <div class="children-header">Children from this marriage were:</div>
                            
                            <div class="children-list">
                                <div class="child-entry">
                                    <span class="child-marker">i.</span>
                                    <span class="child-name">Gerald "Gary" Rogers</span>, born on 8 Jan 1911 in Dodgeville, Iowa, WI.
                                </div>
                                
                                <div class="child-entry">
                                    <span class="child-marker">ii.</span>
                                    <span class="child-name">Robert P. Rogers</span>, born on 14 Jun 1913 in Dodgeville, Iowa, WI.
                                </div>
                                
                                <div class="child-entry">
                                    <span class="child-marker">iii.</span>
                                    <span class="child-name">Timothy Rogers</span>, born on 5 May 1915 in Springfield, IL.
                                </div>
                                
                                <div class="child-entry">
                                    <span class="child-marker">iv.</span>
                                    <span class="child-name">Linda Rogers</span>, born on 17 Dec 1917 in Dodgeville, Iowa, WI.
                                </div>
                                
                                <div class="child-entry">
                                    <div class="special-child-number">2</div>
                                    <span class="child-marker">v.</span>
                                    <a href="#" class="numbered-child-name">John Walter Rogers</a>, born on 23 Nov 1919 in Madison, Dane, WI.
                                </div>
                                
                                <div class="child-entry">
                                    <span class="child-marker">vi.</span>
                                    <span class="child-name">Thomas Rogers</span>, born on 3 Feb 1922 in Madison, Dane, WI.
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <hr class="entry-divider">
                    
                    <!-- Second Person Entry -->
                    <div class="person-entry">
                        <div class="person-number">10</div>
                        <div class="person-content">
                            <span class="person-name">Thomas Jefferson Williams</span><span class="relationship-text">, son of <a href="#">Jesse Williams</a> and <a href="#">Mary F. Williams</a>, was born on 12 Apr 1892 in Dodgeville, Iowa, WI and died on 5 Sep 1958 in Madison, Dane, WI, at age 66.</span>
                            
                            <div class="marriage-details">
                                Thomas married <a href="#">Elizabeth Anne Johnson</a> on 15 Oct 1915 in Mineral Point, Iowa, WI.
                            </div>
                        </div>
                    </div>
                    
                    <hr class="entry-divider">
                    
                    <!-- Third Person Entry with large number -->
                    <div class="person-entry">
                        <div class="person-number">11</div>
                        <div class="person-content">
                            <span class="person-name">Sarah Emily Williams</span><span class="relationship-text">, daughter of <a href="#">Jesse Williams</a> and <a href="#">Mary F. Williams</a>, was born on 24 Dec 1895 in Dodgeville, Iowa, WI.</span>
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div class="footer-line"></div>
                    <div class="footer">
                        <div class="report-name">Sapling Platinum Report</div>
                        <div class="page-number">1</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pagination Controls - Moved outside of panels for proper centering -->
    <div class="pagination-controls">
        <!-- Reset Template Button - Added on the left side -->
        <button id="reset-template-btn" class="pagination-button reset-template-button" title="Reset to initial template">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="1.2em" height="1.2em">
                <path d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0z"/>
                <path d="M12 7v5l2.5 2.5"/>
                <path d="M16.24 7.76A5.96 5.96 0 0 0 12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-1.44-.51-2.76-1.36-3.79"/>
            </svg>
        </button>
        <!-- Add a subtle divider after the reset button -->
        <div class="pagination-divider"></div>
        
        <button id="prev-page-btn" class="pagination-button" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="1.2em" height="1.2em"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </button>
        <div id="page-indicator" class="page-indicator">
            <form id="page-jump-form" class="page-jump-form">
                <span>Page </span>
                <input type="number" id="page-input" class="page-input" min="1" value="1">
                <span> of <span id="page-total">1</span></span>
            </form>
        </div>
        <button id="next-page-btn" class="pagination-button" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="1.2em" height="1.2em"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
        </button>
        <!-- Add a subtle divider before the delete button -->
        <div class="pagination-divider"></div>
        <!-- Delete Page Button - Now inside pagination controls -->
        <button id="delete-page-btn" class="pagination-button delete-page-button" title="Delete current page">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="1.2em" height="1.2em">
                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                <line x1="10" y1="11" x2="10" y2="17"/>
                <line x1="14" y1="11" x2="14" y2="17"/>
            </svg>
        </button>
    </div>
    
    <script type="module" src="./main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
</body>
</html>
